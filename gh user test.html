<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Test dry.js</title>
	<link rel="stylesheet" href="">
</head>
<body>

	<!-- Template -->
	<script data-dry="users/default" type="text/template">
		Welcome
	</script>
	<script data-dry="users/:name" type="text/template">
    <table>
	    <tr>
	        <td>login</td>
	        <td><%=login%></td>
	    </tr>
	    <tr>
	        <td>id</td>
	        <td><%=id%></td>
	    </tr>
	    <tr>
	        <td>avatar_url</td>
	        <td><%=avatar_url%></td>
	    </tr>
	    <tr>
	        <td>gravatar_id</td>
	        <td><%=gravatar_id%></td>
	    </tr>
	    <tr>
	        <td>url</td>
	        <td><%=url%></td>
	    </tr>
	    <tr>
	        <td>html_url</td>
	        <td><%=html_url%></td>
	    </tr>
	    <tr>
	        <td>followers_url</td>
	        <td><%=followers_url%></td>
	    </tr>
	    <tr>
	        <td>following_url</td>
	        <td><%=following_url%></td>
	    </tr>
	    <tr>
	        <td>gists_url</td>
	        <td><%=gists_url%></td>
	    </tr>
	    <tr>
	        <td>starred_url</td>
	        <td><%=starred_url%></td>
	    </tr>
	    <tr>
	        <td>subscriptions_url</td>
	        <td><%=subscriptions_url%></td>
	    </tr>
	    <tr>
	        <td>organizations_url</td>
	        <td><%=organizations_url%></td>
	    </tr>
	    <tr>
	        <td>repos_url</td>
	        <td><%=repos_url%></td>
	    </tr>
	    <tr>
	        <td>events_url</td>
	        <td><%=events_url%></td>
	    </tr>
	    <tr>
	        <td>received_events_url</td>
	        <td><%=received_events_url%></td>
	    </tr>
	    <tr>
	        <td>type</td>
	        <td><%=type%></td>
	    </tr>
	    <tr>
	        <td>site_admin</td>
	        <td><%=site_admin%></td>
	    </tr>
	    <tr>
	        <td>name</td>
	        <td><%=name%></td>
	    </tr>
	    <tr>
	        <td>company</td>
	        <td><%=company%></td>
	    </tr>
	    <tr>
	        <td>blog</td>
	        <td><%=blog%></td>
	    </tr>
	    <tr>
	        <td>location</td>
	        <td><%=location%></td>
	    </tr>
	    <tr>
	        <td>email</td>
	        <td><%=email%></td>
	    </tr>
	    <tr>
	        <td>hireable</td>
	        <td><%=hireable%></td>
	    </tr>
	    <tr>
	        <td>bio</td>
	        <td><%=bio%></td>
	    </tr>
	    <tr>
	        <td>public_repos</td>
	        <td><%=public_repos%></td>
	    </tr>
	    <tr>
	        <td>public_gists</td>
	        <td><%=public_gists%></td>
	    </tr>
	    <tr>
	        <td>followers</td>
	        <td><%=followers%></td>
	    </tr>
	    <tr>
	        <td>following</td>
	        <td><%=following%></td>
	    </tr>
	    <tr>
	        <td>created_at</td>
	        <td><%=created_at%></td>
	    </tr>
	    <tr>
	        <td>updated_at</td>
	        <td><%=updated_at%></td>
	    </tr>
	</table>
	</script>

	<!-- User details -->
	<h1>GitHub User</h1>
	<div data-dry="users/:name, users/default"></div>

	<script src="dist/dry.js" type="text/javascript"></script>
	<script>
	var app = dry.app('app'),
		model = app.model('UserModel', {
	        getData: 'GET https://api.github.com/users/{name}',
	    });

	app.controller('users', {
		'default': function(params) {
			console.log('Should work for /users and /users?id=something');
			return null;
		},
		':name': function(params) { /* TODO: Not working */
			var model = app.model('UserModel')
				.set('name', params.name);
			return model
				.getData()
				.then(function (data) {
					console.log('Should work for /users/something');
					model.set(data);
					return new dry.View('users/:name', {model: model});
				});
		},
		'some/long/url': function (params) {
			console.log('Should work for /users and /users/some/long/url');
			return null;
		}
	});

	app.init();

	/* new app.model('UserModel', {attributes: params}) NOT WORKING */

	</script>
</body>
</html>
