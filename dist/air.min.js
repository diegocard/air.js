!function(t){var e=[],n={},r="routie",i=t[r],o=function(t,e){this.name=e,this.path=t,this.keys=[],this.fns=[],this.params={},this.regex=a(this.path,this.keys,!1,!1)};o.prototype.addHandler=function(t){this.fns.push(t)},o.prototype.removeHandler=function(t){for(var e=0,n=this.fns.length;n>e;e++){var r=this.fns[e];if(t==r)return void this.fns.splice(e,1)}},o.prototype.run=function(t){for(var e=0,n=this.fns.length;n>e;e++)this.fns[e].apply(this,t)},o.prototype.match=function(t,e){var n=this.regex.exec(t);if(!n)return!1;for(var r=1,i=n.length;i>r;++r){var o=this.keys[r-1],a="string"==typeof n[r]?decodeURIComponent(n[r]):n[r];o&&(this.params[o.name]=a),e.push(a)}return!0},o.prototype.toURL=function(t){var e=this.path;for(var n in t)e=e.replace("/:"+n,"/"+t[n]);if(e=e.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=e.indexOf(":"))throw Error("missing parameters for url: "+e);return e};var a=function(t,e,n,r){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,n,r,i,o,a){return e.push({name:i,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(r||"")+(o||r&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),RegExp("^"+t+"$",n?"":"i"))},s=function(t,r){var i=t.split(" "),a=2==i.length?i[0]:null;t=2==i.length?i[1]:i[0],n[t]||(n[t]=new o(t,a),e.push(n[t])),n[t].addHandler(r)},h=function(t,e){if("function"==typeof e)s(t,e),h.reload();else if("object"==typeof t){for(var n in t)s(n,t[n]);h.reload()}else void 0===e&&h.navigate(t)};h.lookup=function(t,n){for(var r=0,i=e.length;i>r;r++){var o=e[r];if(o.name==t)return o.toURL(n)}},h.remove=function(t,e){var r=n[t];r&&r.removeHandler(e)},h.removeAll=function(){n={},e=[]},h.navigate=function(t,e){e=e||{};var n=e.silent||!1;n&&f(),setTimeout(function(){window.location.hash=t,n&&setTimeout(function(){c()},1)},1)},h.noConflict=function(){return t[r]=i,h};var p=function(){return window.location.hash.substring(1)},l=function(t,e){var n=[];return e.match(t,n)?(e.run(n),!0):!1},u=h.reload=function(){for(var t=p(),n=0,r=e.length;r>n;n++){var i=e[n];if(l(t,i))return}},c=function(){t.addEventListener?t.addEventListener("hashchange",u,!1):t.attachEvent("onhashchange",u)},f=function(){t.removeEventListener?t.removeEventListener("hashchange",u):t.detachEvent("onhashchange",u)};c(),t[r]=h}(window),air={$:function(t){return new air.Dom(t)},apps:{},app:function(t,e){var n=this.apps[t];return n||(n=new air.App(t,e),this.apps[t]=n),n}},air.Dom=function(t){this.element=document.querySelector(t)},air.Dom.prototype.html=function(t){return t?(this.element.innerHTML=t,this):this.element.innerHTML},air.App=function(t,e){this.name=t,this.options=e||{},this.routes=this.options.routes||[],this.controllers=this.options.controllers||{},this.views=this.options.views||{}},air.App.prototype.controller=function(t,e){var n,r;if(n=new air.Controller(t,e),this.controllers[t]=n,e)for(r in e)e.hasOwnProperty(r)&&this.routes.push(t+"/"+r);return n},air.App.prototype.view=function(t,e){this.views[t]=new air.View(t,e)},air.App.prototype.init=function(){this.router=new air.Router(this.controllers,this.routes)},air.Router=function(t,e){var n,r,i,o,a;for(n=0,r=e.length;r>n;n++)i=e[n],o=this.getControllerName(i),a=this.getControllerMethod(i),controller=t[o],controller&&routie(i,function(t){controller.invokeMethod(a,t)})},air.Router.prototype.getControllerName=function(t){return t.split("/")[0]},air.Router.prototype.getControllerMethod=function(t){return t.split("/")[1].split("?")[0]},air.Controller=function(t,e){this.name=t,this.methods=e||{}},air.Controller.prototype.invokeMethod=function(t,e){var n,r,i=this.methods[t];i?(n=i.apply(this,e),typeof n===air.View&&n.render()):(r=this.name+"-"+t,new air.View(r,{templateData:e}).render())},air.Template=function(t,e){this.name=t,this.domId=e||"#"+t,this.raw=air.$(this.domId).element.innerHTML.trim()},air.Template.prototype.compile=function(t){var e,n=this.raw;for(e in t)n=n.replace(new RegExp("{{"+e+"}}","g"),t[e]);return n},air.View=function(t,e){e=e||{},this.name=t,this.el=e.el||"#"+t,this.templateData=e.templateData||{},this.template=new air.Template(t)},air.View.prototype.render=function(){var t=air.$(this.el),e=this.template.compile(this.templateData);t.html(e)};